<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸš€ ADVANCED AVIATION SAFETY MONITOR</title>
    <!-- Plotly.js for charting -->
    <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>
    <link rel="stylesheet" href="dashboard.css">
</head>

<body>
    <nav class="navbar">
        <div class="logo">Flight Crash History</div>

        <!-- Hidden checkbox to toggle menu -->
        <input type="checkbox" id="menu-toggle" />
        <label for="menu-toggle" class="hamburger">â˜°</label>

        <ul class="nav-links">
            <li><a href="#">Home</a></li>
            <li><a href="#">Data</a></li>
            <li><a href="#">Analysis</a></li>
            <li><a href="#">About</a></li>
        </ul>
    </nav>

    <div class="container">
        <h1 class="header">ğŸš€ ADVANCED AVIATION SAFETY MONITOR</h1>

        <div class="metrics-grid" id="metrics-grid">
            <!-- Metrics will be inserted here by JavaScript -->
        </div>

        <div class="tabs-container">
            <button class="tab-button active" onclick="openTab(event, 'globe')">ğŸŒ 3D GLOBE (ML-SEVERITY)</button>
            <button class="tab-button" onclick="openTab(event, 'ml-risk')">ğŸ§  ML PREDICTION & RISK</button>
            <button class="tab-button" onclick="openTab(event, 'deep-dive')">ğŸ” CRASH DEEP DIVE</button>
            <button class="tab-button" onclick="openTab(event, 'trends')">ğŸ’€ FATALITY TRENDS</button>
            <button class="tab-button" onclick="openTab(event, 'data-grid')">ğŸ“Š DATA GRID</button>
        </div>

        <div id="globe" class="tab-content active">
            <div class="flex-container">
                <div class="flex-left">
                    <div class="sidebar">
                        <h3 class="chart-title" style="border: none;">ğŸ¯ Filters</h3>
                        <label for="globe-year-select">Select Year:</label>
                        <select id="globe-year-select" onchange="renderGlobe()">
                            <option value="All">All Years</option>
                        </select>
                        <p style="color: var(--accent-primary); margin-top: 15px; font-size: 0.9em;">
                            Marker size and color indicate the **ML-Predicted Severity Score** (0-100).
                        </p>
                    </div>
                </div>
                <div class="flex-right">
                    <div class="content-panel">
                        <h3 class="chart-title">ğŸŒ Interactive 3D Globe</h3>
                        <div id="globe-chart" style="height: 750px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="ml-risk" class="tab-content">
            <div class="flex-container">
                <div class="flex-left">
                    <div class="sidebar">
                        <h3 class="chart-title" style="border: none;">ğŸ§  Risk Parameters</h3>
                        <label for="severity-threshold">Minimum Severity Score:</label>
                        <input type="range" id="severity-threshold" min="0" max="100" value="50"
                            oninput="updateMLRisk(this.value)">
                        <span id="threshold-value" style="color: var(--accent-secondary); font-weight: 700;">50</span>
                        <p style="margin-top: 15px;">Crashes Above Threshold: <span id="crashes-above-threshold"
                                style="color: var(--danger);">...</span></p>
                    </div>
                </div>
                <div class="flex-right">
                    <div class="content-panel">
                        <h3 class="chart-title">âœ¨ ML-Driven Severity Analysis (Fatalities vs. Aboard)</h3>
                        <div id="severity-scatter-chart" style="height: 600px;"></div>
                    </div>
                </div>
            </div>
            <div class="content-panel">
                <h3 class="chart-title">ğŸ¥‡ Airline Weighted Risk Ranking (ML-Enhanced)</h3>
                <div id="operator-risk-chart" style="height: 600px;"></div>
            </div>
        </div>

        <div id="deep-dive" class="tab-content">
            <div class="flex-container">
                <div class="flex-left">
                    <div class="sidebar">
                        <h3 class="chart-title" style="border: none;">ğŸ” Filter High-Impact Events</h3>
                        <label for="dive-severity-min">Min Severity Score:</label>
                        <input type="range" id="dive-severity-min" min="0" max="100" value="70"
                            oninput="updateDeepDive()">
                        <span id="dive-severity-min-value"
                            style="color: var(--accent-secondary); font-weight: 700;">70</span>
                        <p style="margin-top: 15px;">**Total Filtered Crashes:** <span id="dive-filtered-count"
                                style="color: var(--accent-primary);">...</span></p>
                    </div>
                </div>
                <div class="flex-right">
                    <div class="content-panel">
                        <h3 class="chart-title">ğŸ“‹ Top Filtered High-Impact Crashes</h3>
                        <div id="deep-dive-results">
                            <p style="color: var(--text-secondary);">Select filters to view crash details here.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="trends" class="tab-content">
            <div class="content-panel">
                <h3 class="chart-title">ğŸ’€ Fatality Trends Over Time</h3>
                <div id="fatality-trends-chart" style="height: 600px;"></div>
            </div>
        </div>

        <div id="data-grid" class="tab-content">
            <div class="table-container">
                <h3 class="chart-title">ğŸ“Š Comprehensive Crash Data</h3>
                <table class="data-table" id="crash-table">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Date</th>
                            <th>Operator</th>
                            <th>Type</th>
                            <th>Location</th>
                            <th>Fatalities</th>
                            <th>Severity</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>

</html>