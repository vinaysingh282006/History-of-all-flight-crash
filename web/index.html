<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flight Crash Map – Filters & Analytics</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <!-- Add Leaflet.markercluster CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"
    />
  </head>
  <body>
    <div id="sidebar">
      <h2>Crash Filters</h2>

      <label>Year Range</label>
      <div class="row">
        <input type="number" id="yearMin" placeholder="From" />
        <input type="number" id="yearMax" placeholder="To" />
      </div>

      <label>Aircraft Type</label>
      <select id="typeFilter">
        <option value="All">All</option>
        <option value="Commercial">Commercial</option>
        <option value="Cargo">Cargo</option>
        <option value="Private">Private</option>
        <option value="Military">Military</option>
      </select>

      <label>Country / Region</label>
      <input type="text" id="regionFilter" placeholder="e.g. India" />

      <label>Min Fatalities</label>
      <input type="number" id="fatalFilter" placeholder="≥ fatalities" />

      <!-- Weather Filters Section -->
      <hr />
      <h3>Weather Filters</h3>
      <label>Precipitation</label>
      <select id="precipitationFilter">
        <option value="all">Any</option>
        <option value="rain">Rain</option>
        <option value="snow">Snow</option>
        <option value="clear">Clear</option>
      </select>

      <label>Wind Speed (m/s)</label>
      <div class="row">
        <input type="number" id="windMin" placeholder="Min" />
        <input type="number" id="windMax" placeholder="Max" />
      </div>

      <label>Visibility (km)</label>
      <input type="number" id="visibilityFilter" placeholder="Max visibility" />

      <button id="applyFilter">Apply Filters</button>
      <button id="resetFilter">Reset Filters</button>

      <hr />

      <h3>Analytics</h3>
      <div id="stats">
        <p>Total Crashes: <span id="count"></span></p>
        <p>Total Fatalities: <span id="fatalities"></span></p>
        <p>Average Fatalities: <span id="avg"></span></p>
      </div>

      <canvas id="chart" width="200" height="200"></canvas>
      
      <hr />
      
      <h3>Timeline</h3>
      <div id="timeline-container">
        <canvas id="timeline-chart" width="200" height="150"></canvas>
      </div>
      
      <hr />
      
      <h3>Operator Analysis</h3>
      <div id="operator-container">
        <canvas id="operator-chart" width="200" height="200"></canvas>
      </div>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Add Leaflet.markercluster JS -->
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../src/script.js"></script>
  </body>
</html>